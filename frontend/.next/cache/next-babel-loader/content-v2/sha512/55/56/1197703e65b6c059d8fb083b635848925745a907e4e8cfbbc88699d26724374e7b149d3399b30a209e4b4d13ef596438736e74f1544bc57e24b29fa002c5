{"ast":null,"code":"var _jsxFileName = \"/home/node/app/pages/index.tsx\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport Layout from \"../components/Layout\";\nimport { initializeApollo, addApolloState } from \"../lib/apolloClient\";\nimport MediaCard from \"../components/Card\";\nimport { useRouter } from \"next/router\";\nimport PageNav from \"../components/PageNav\";\nimport { CURSORS_QUERY, POSTS_QUERY, ITEMS_PER_PAGE } from \"./[page]\";\n\nconst IndexPage = ({\n  posts,\n  errors,\n  numOfPages\n}) => {\n  const router = useRouter();\n\n  if (errors) {\n    return __jsx(Layout, {\n      title: \"Error | Next.js + TypeScript Example\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 27,\n        columnNumber: 7\n      }\n    }, __jsx(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 28,\n        columnNumber: 9\n      }\n    }, __jsx(\"span\", {\n      style: {\n        color: \"red\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 29,\n        columnNumber: 11\n      }\n    }, \"Error:\"), \" \", errors));\n  } // let navigablePages = [];\n  // navigablePages.push(\n  //   <IconButton\n  //   disabled\n  //     onClick={() => {\n  //       router.push(`/`);\n  //     }}\n  //   >\n  //     {1}\n  //   </IconButton>\n  // );\n  // for (let i = 2; i <= Math.min(NUM_OF_NAV_PAGES, numOfPages); i++) {\n  //   navigablePages.push(\n  //     <IconButton\n  //       onClick={() => {\n  //         router.push(`/${i}`);\n  //       }}\n  //     >\n  //       {i}\n  //     </IconButton>\n  //   );\n  // }\n  // if(numOfPages > NUM_OF_NAV_PAGES){\n  //   navigablePages.push(\n  //     <IconButton\n  //       onClick={() => {\n  //         router.push(`/${NUM_OF_NAV_PAGES + 1}`);\n  //       }}\n  //     >\n  //       {\"...\"}\n  //     </IconButton>\n  //   );\n  // }\n\n\n  return __jsx(Layout, {\n    title: \"Home | Next.js + TypeScript Example\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 5\n    }\n  }, __jsx(\"div\", {\n    className: \"flex flex-col items-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }\n  }, posts.map((post, index) => {\n    return __jsx(\"div\", {\n      className: \"m-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 13\n      }\n    }, __jsx(MediaCard, {\n      key: index,\n      title: post.title,\n      description: post.excerpt || \"\",\n      imgTitle: post.title,\n      imgURL: post.featuredImage ? post.featuredImage.sourceUrl : \"image_not_found.png\",\n      cardWidth: 345,\n      imgHeight: 140,\n      link: `posts/${post.slug}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 15\n      }\n    }));\n  }), __jsx(PageNav, {\n    pageNumber: 1,\n    numOfPages: numOfPages,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 11\n    }\n  })));\n};\n\nexport default IndexPage;\nexport const getStaticProps = async () => {\n  try {\n    const apolloClient = initializeApollo();\n    const cursors = await apolloClient.query({\n      query: CURSORS_QUERY,\n      context: {\n        clientName: \"wordPress\"\n      }\n    }).then(res => [res.data.posts.edges[0], ...res.data.posts.edges.filter((_, index) => (index + 1) % ITEMS_PER_PAGE === 0)]);\n    const {\n      data\n    } = await apolloClient.query({\n      query: POSTS_QUERY,\n      variables: {\n        first: ITEMS_PER_PAGE,\n        last: null,\n        after: null,\n        before: null\n      },\n      context: {\n        clientName: \"wordPress\"\n      }\n    });\n    return addApolloState(apolloClient, {\n      props: {\n        posts: data.posts.edges.map(edge => edge.node),\n        numOfPages: cursors.length\n      }\n    });\n  } catch (err) {\n    return {\n      props: {\n        errors: err.message\n      }\n    };\n  }\n};","map":{"version":3,"sources":["/home/node/app/pages/index.tsx"],"names":["Layout","initializeApollo","addApolloState","MediaCard","useRouter","PageNav","CURSORS_QUERY","POSTS_QUERY","ITEMS_PER_PAGE","IndexPage","posts","errors","numOfPages","router","color","map","post","index","title","excerpt","featuredImage","sourceUrl","slug","getStaticProps","apolloClient","cursors","query","context","clientName","then","res","data","edges","filter","_","variables","first","last","after","before","props","edge","node","length","err","message"],"mappings":"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","sourcesContent":["import Layout from \"../components/Layout\";\nimport { initializeApollo, addApolloState } from \"../lib/apolloClient\";\nimport MediaCard from \"../components/Card\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport NavigateNextIcon from \"@material-ui/icons/NavigateNext\";\nimport { GetStaticProps } from \"next\";\nimport { useRouter } from \"next/router\";\nimport PageNav from \"../components/PageNav\";\n\nimport {\n  CURSORS_QUERY,\n  POSTS_QUERY,\n  ITEMS_PER_PAGE,\n  Post,\n} from \"./[page]\";\n\ntype Props = {\n  posts?: Post[];\n  errors?: string;\n  numOfPages: number;\n};\n\nconst IndexPage = ({ posts, errors, numOfPages }: Props) => {\n  const router = useRouter();\n  if (errors) {\n    return (\n      <Layout title=\"Error | Next.js + TypeScript Example\">\n        <p>\n          <span style={{ color: \"red\" }}>Error:</span> {errors}\n        </p>\n      </Layout>\n    );\n  }\n\n  // let navigablePages = [];\n  // navigablePages.push(\n  //   <IconButton\n  //   disabled\n  //     onClick={() => {\n  //       router.push(`/`);\n  //     }}\n  //   >\n  //     {1}\n  //   </IconButton>\n  // );\n  // for (let i = 2; i <= Math.min(NUM_OF_NAV_PAGES, numOfPages); i++) {\n  //   navigablePages.push(\n  //     <IconButton\n  //       onClick={() => {\n  //         router.push(`/${i}`);\n  //       }}\n  //     >\n  //       {i}\n  //     </IconButton>\n  //   );\n  // }\n\n  // if(numOfPages > NUM_OF_NAV_PAGES){\n  //   navigablePages.push(\n  //     <IconButton\n  //       onClick={() => {\n  //         router.push(`/${NUM_OF_NAV_PAGES + 1}`);\n  //       }}\n  //     >\n  //       {\"...\"}\n  //     </IconButton>\n  //   );\n  // }\n  return (\n    <Layout title=\"Home | Next.js + TypeScript Example\">\n      <div className=\"flex flex-col items-center\">\n        {posts!.map((post: Post, index: number) => {\n          return (\n            <div className=\"m-4\">\n              <MediaCard\n                key={index}\n                title={post.title}\n                description={post.excerpt || \"\"}\n                imgTitle={post.title}\n                imgURL={\n                  post.featuredImage\n                    ? post.featuredImage.sourceUrl\n                    : \"image_not_found.png\"\n                }\n                cardWidth={345}\n                imgHeight={140}\n                link={`posts/${post.slug}`}\n              />\n            </div>\n          );\n        })}\n\n        {/* {navigablePages}\n          { numOfPages > 1 && \n          <IconButton\n            onClick={() => {\n              router.push(`/${2}`);\n            }}\n          >\n            <NavigateNextIcon />\n          </IconButton>\n          }  */}\n\n          <PageNav pageNumber={1} numOfPages={numOfPages}/>\n      </div>\n    </Layout>\n  );\n};\n\nexport default IndexPage;\n\nexport const getStaticProps: GetStaticProps = async () => {\n  try {\n    const apolloClient = initializeApollo();\n\n    const cursors = await apolloClient\n      .query({\n        query: CURSORS_QUERY,\n        context: { clientName: \"wordPress\" },\n      })\n      .then((res) => [\n        res.data.posts.edges[0],\n        ...res.data.posts.edges.filter(\n          (_: string, index: number) => (index + 1) % ITEMS_PER_PAGE === 0\n        ),\n      ]);\n\n    const { data } = await apolloClient.query({\n      query: POSTS_QUERY,\n      variables: {\n        first: ITEMS_PER_PAGE,\n        last: null,\n        after: null,\n        before: null,\n      },\n      context: { clientName: \"wordPress\" },\n    });\n\n    return addApolloState(apolloClient, {\n      props: {\n        posts: data.posts.edges.map((edge: { node: Post }) => edge.node),\n        numOfPages: cursors.length,\n      },\n    });\n  } catch (err) {\n    return { props: { errors: err.message } };\n  }\n};\n"]},"metadata":{},"sourceType":"module"}